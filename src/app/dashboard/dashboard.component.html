<header class="hdr">
  <h2>Dashboard</h2>
  <div class="right">
    <span *ngIf="email"><b>{{ email }}</b></span>
    <button (click)="logout()">Logout</button>
  </div>
</header>

<h3>Countries</h3>

<input
  class="search"
  type="text"
  [(ngModel)]="q"
  (input)="filter()"
  placeholder="Search by name, code, capital, region"
/>

<p *ngIf="loading">Loading…</p>
<p *ngIf="error" class="err">{{ error }}</p>

<table *ngIf="!loading && !error && filtered.length" class="tbl">
  <thead>
    <tr>
      <th>Flag</th>
      <th>Name</th>
      <th>Code</th>
      <th>Capital</th>
      <th>Region</th>
      <th class="num">Population</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of filtered">
      <td><img [src]="r.flags.png" [alt]="r.name.common" width="24" height="16"/></td>
      <td>{{ r.name.common }}</td>
      <td>{{ r.cca2 }}</td>
      <td>{{ r.capital?.[0] || '—' }}</td>
      <td>{{ r.region }}</td>
      <td class="num">{{ r.population | number }}</td>
    </tr>
  </tbody>
</table>

<p *ngIf="!loading && !error && !filtered.length">No results.</p>
